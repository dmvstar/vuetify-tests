<!DOCTYPE html>
<html>

<head>
    <title>Vuetify Data table style example NG V3</title>
    <!--link rel="shortcut icon" type="image/png" href="https://cdn.vuetifyjs.com/images/logos/vuetify-logo-300.png" /-->
    <link rel="shortcut icon" type="image/png"
        href="https://raw.githubusercontent.com/dmvstar/vuetify-tests/main/src/nodered/webs/sales/assets/vuetifyjs-128x128-v.2.png" />
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/vuetify@3.5.0/dist/vuetify.min.css" rel="stylesheet" />

    <style>
        .v-data-table__tr:has(input[type='checkbox']:checked) {
            background: #f5c17d70 !important;
        }

        .v-theme--light.v-data-table thead {
            background-color: #bb996dc2;
        }

        .v-theme--light.v-data-table tbody tr:nth-child(even) {
            background-color: #f4e1c8c2;
        }

        .v-theme--dark.v-data-table thead {
            background-color: #101010c2;
        }

        .v-theme--dark.v-data-table tbody tr:nth-child(even) {
            background-color: #363636c2;
        }
    </style>
</head>

<body>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@3.5.0/dist/vuetify.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <div id="app"></div>

    <template id="app-template">
        <!-- <v-card> -->
        <v-layout>
            <v-app-bar density="comfortable" class="text-white" color="green" prominent
                image="https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg">
                <v-app-bar-nav-icon variant="text"></v-app-bar-nav-icon>
                <v-img class="mx-2" src="https://cdn.vuetifyjs.com/docs/images/one/logos/vuetify-logo-dark.png"
                    max-width="140" contain></v-img>
                <v-toolbar-title>
                    <v-card outlined color="transparent">
                        <template v-slot:title>
                            Data table example
                        </template>
                        <template v-slot:subtitle>
                            {{appAuthor}} {{appVersion}}
                        </template>
                    </v-card>
                </v-toolbar-title>
                <v-spacer></v-spacer>
                <template v-if="$vuetify.display.mdAndUp">
                    <v-btn icon="mdi-magnify" variant="text"></v-btn>
                    <v-btn icon="mdi-filter" variant="text"></v-btn>
                </template>
                <v-tooltip top>
                    <template v-slot:activator="{ props }">
                        <v-btn v-bind="props" :icon="isDarkTheme == false ? 'mdi-weather-night' : 'mdi-weather-sunny'"
                            @click="onBtnChangeTheme"></v-btn>
                    </template>
                    <span>Be on the dark side ...</span>
                </v-tooltip>
                <v-btn icon="mdi-dots-vertical" variant="text" @click.stop="secondDrawer = !secondDrawer"></v-btn>
            </v-app-bar>
            <v-navigation-drawer :width="325" temporary expand-on-hover rall location="right" v-model="secondDrawer">
                <div id="second-driwer" class="ma-3">
                    <!--v-list density="compact" nav-->
                    <v-row ma="10">

                        <v-col ma="10">
                            <v-icon icon="mdi-radar"></v-icon>
                            Filteres
                        </v-col>
                    </v-row>
                    <v-row ma="10">
                        <v-col ma="10">
                            <v-text-field density="compact" v-model="searchData.searchText" label="Search data"
                                prepend-icon="mdi-search-web" clearable clear-icon="mdi-backspace">
                            </v-text-field>
                        </v-col>
                    </v-row>
                    <v-row ma="10">
                        <v-col ma="10">
                            <v-menu density="compact" v-model="searchData.dateFromDateMenu"
                                :close-on-content-click="false" :close-on-click="true">
                                <template v-slot:activator="{ props }">
                                    <v-text-field density="compact" v-model="searchData.selectedDateFrom"
                                        label="Date From" prepend-icon="mdi-calendar" clearable
                                        clear-icon="mdi-backspace" v-bind="props">
                                    </v-text-field>
                                </template>
                                <v-date-picker @update:model-value="searchData.dateFromDateMenu = false"
                                    v-model="searchData.selectedDateFromFull"></v-date-picker>
                            </v-menu>
                        </v-col>
                    </v-row>
                    <v-row ma="10">
                        <v-col ma="10">
                            <v-menu density="compact" v-model="searchData.dateIntoDateMenu"
                                :close-on-content-click="false" :close-on-click="true">
                                <template v-slot:activator="{ props }">
                                    <v-text-field density="compact" v-model="searchData.selectedDateInto"
                                        label="Date Into" prepend-icon="mdi-calendar" clearable
                                        clear-icon="mdi-backspace" v-bind="props">
                                    </v-text-field>
                                </template>
                                <v-date-picker v-model="searchData.selectedDateIntoFull"></v-date-picker>
                            </v-menu>
                        </v-col>
                    </v-row>
                    <!--/v-list-->
                    <v-row ma="10">
                        <v-col ma="10">
                            <v-btn color="green" block @click="onBtnApplyFilters">Apply</v-btn>
                        </v-col>
                    </v-row>
                    <v-row ma="10">
                        <v-col ma="10">
                            <v-btn color="orange" block @click="onBtnClearFilters">Clear</v-btn>
                        </v-col>
                    </v-row>
                </div>
            </v-navigation-drawer>

            <v-main>
                <div id="main" class="ma-3">
                    <v-row ma="5">
                        <v-card-title>
                            Application Steps searcher...
                        </v-card-title>
                    </v-row>
                    <v-row ma="10">
                        <v-col cols="4" sm="4" ma="10">
                            <v-text-field ref="applicationID" v-model="searchData.applicationID" label="Application ID"
                                type="text" density="compact" @keypress="filterNumber(event)" placeholder="123456789"
                                @keydown.enter="onBtnSearch" clearable></v-text-field>
                        </v-col>
                        <v-col cols="2" sm="2" ma="10">
                            <v-btn :loading="isLoading" :disabled="isLoading || !searchData.applicationID" color="green"
                                @click="onBtnSearch" block>Search</v-btn>
                        </v-col>
                        <v-col cols="2" sm="2" ma="10">
                            <v-btn :loading="isLoading" :disabled="isLoading || !searchData.applicationID"
                                color="yellow" @click="onBtnClear" block>Clear</v-btn>
                        </v-col>
                        <v-col cols="4" sm="4" ma="10">
                            <v-select density="compact" label="Refer ID" v-model="searchData.referID" clearable
                                :items=searchData.referIDS></v-select>
                        </v-col>
                    </v-row>
                    <v-row ma="2">
                        <v-col cols="10">
                            <v-card-text>
                                VDataTable {{stepsData.stepsItemsData.length}} items
                            </v-card-text>
                        </v-col>
                        <v-col cols="2" align="right">
                            <v-menu density="compact" transition="scale-transition" :close-on-content-click="false">
                                <template v-slot:activator="{ props }">
                                    <v-btn color="green" v-bind="props" append-icon="mdi-chevron-down">
                                        Columns Order ...
                                    </v-btn>
                                </template>
                                <v-list>
                                    <!-- stepsData.stepsHeaders  @click="onUserMenuClick(action, index)"  :prepend-icon="icon"   -->
                                    <!--v-list-item v-for="([title, icon, action], index) in menuActions.actionsList"-->
                                    <v-list-item v-for="({title, subtitle}, index) in stepsData.stepsHeaders"
                                        :key="index" :title="title" :subtitle="subtitle" :value="title"
                                        :disabled="checkReorderColumnsDisabled(index)" density="compact">
                                        <template v-slot:append>
                                            <v-btn color="grey-lighten-1" icon="mdi-chevron-up" variant="text"
                                                @click="onReorderColumnsClick('UP', index)"></v-btn>
                                            <v-btn color="grey-lighten-1" icon="mdi-chevron-down" variant="text"
                                                @click="onReorderColumnsClick('DN', index)"></v-btn>
                                        </template>
                                        <!--v-icon icon="mdi-chevron-up"></v-icon>
                                        <v-icon icon="mdi-chevron-down"></v-icon-->
                                    </v-list-item>
                                </v-list>
                            </v-menu>
                        </v-col>
                    </v-row>
                    <v-row ma="10">
                        <v-col cols="12" sm="12" ma="10">

                            <v-data-table :items-per-page="8" :headers="stepsData.stepsHeaders"
                                v-model="stepsData.selectedItems" :items="stepsData.stepsItemsData" item-value="id"
                                item-key="id" :search="searchData.searchText" class="elevation-1" show-select
                                @click:row="stepsDataHandleClick">

                                <template v-slot:[`header.name`]="{ column }">
                                    <div style="white-space: pre-wrap;">{{ column.title }}</div>
                                </template>

                                <!--HEADER SLOTS-->
                                <template v-for="header in stepsData.stepsHeaders"
                                    #[`header.${header.key}`]="{ column, isSorted, getSortIcon, toggleSort }">
                                    <v-card outlined color="transparent" variant="flat">
                                        <template v-slot:title>
                                            <div class="text-subtitle-1" style="white-space: pre-wrap;">
                                                <template v-if="column.sortable">
                                                    <template v-if="isSorted(column)">
                                                        <v-icon size="x-small"
                                                            :icon="getSortIcon(column, toggleSort)"></v-icon>
                                                    </template>
                                                    <template v-else>
                                                        <v-icon size="x-small" color="#808080" icon="mdi-sort"></v-icon>
                                                    </template>
                                                </template>
                                                {{column.title}}
                                                <template v-if="column.icon">
                                                    <v-icon size="x-small"
                                                        color="green-darken-2">{{column.icon}}</v-icon>
                                                </template>
                                            </div>
                                        </template>
                                        <template v-slot:subtitle class="text-subtitle-2">
                                            {{ column.subtitle }}

                                        </template>
                                        <v-tooltip activator="parent" location="top">
                                            {{ column.hint }}
                                        </v-tooltip>

                                    </v-card>
                                </template>

                                <template v-slot:[`header.calories`]="{ column, isSorted, getSortIcon, toggleSort }">
                                    <v-icon color="green-darken-2">mdi-mushroom</v-icon>
                                    <!--span v-html=column.title></span-->
                                    {{ getTitle(column) }}
                                    {{ column.title }}
                                    <template v-if="isSorted(column)">
                                        <v-icon :icon="getSortIcon(column)"></v-icon>
                                    </template>
                                </template>

                                <template v-slot:header.calories1="{ column, isSorted, getSortIcon, toggleSort }">
                                    <v-icon color="green-darken-2">mdi-mushroom</v-icon>
                                    {{ getTitle(column) }}
                                    [{{ column.title }}]
                                    <template v-if="isSorted(column)">
                                        <v-icon :icon="getSortIcon(column)"></v-icon>
                                    </template>
                                </template>

                                <template v-slot:item.name="{ item }">
                                    <div style="white-space: pre-wrap;">{{ item.name }}</div>
                                </template>
                                <template v-slot:item.calories1="{ item }">
                                    <div style="white-space: pre-wrap;">{{ item.calories }}<br>({{ item.fat }})
                                    </div>
                                </template>
                                <template v-slot:item.calories="{ key, value, item }">
                                    <div>
                                        <v-chip :color="getDebtStatusIconColor(item)">
                                            {{ value }}
                                        </v-chip>
                                    </div>
                                </template>

                                <template v-slot:item.dateCreated="{ key, value, item }">
                                    <div>
                                        <v-chip :color="getDebtStatusIconColor(item)">
                                            {{ item.dateCreated }}
                                        </v-chip>
                                    </div>
                                </template>

                                <template v-slot:item.stepCode1="{ item }">
                                    <div>
                                        <v-chip :color="getDebtStatusIconColor(item)">
                                            {{ item.stepCode }}
                                        </v-chip>
                                    </div>
                                </template>

                                <template v-slot:item.stepCode="{ item }">
                                    <v-chip :color="getDebtStatusIconColor(item)">
                                        {{ item.stepCode }}
                                    </v-chip>
                                </template>

                                <template v-slot:item.actions="{ item }">
                                    <v-btn class="mr-1" density="comfortable" color="blue" icon="mdi-eye"></v-btn>
                                    <v-btn class="mr-1" density="comfortable" color="blue" icon="mdi-alarm"></v-btn>
                                    <v-btn class="mr-1" density="comfortable" color="blue" icon="mdi-pencil"></v-btn>
                                    <v-btn class="mr-1" density="comfortable" color="red" icon="mdi-delete"></v-btn>
                                </template>

                                <template v-slot:item.operations="{ item }">
                                    <!--v-btn block color="blue">Operations</v-btn-->
                                    <v-menu transition="scale-transition">
                                        <template v-slot:activator="{ props }">
                                            <v-btn color="primary" v-bind="props" prepend-icon="mdi-settings"
                                                append-icon="mdi-chevron-down">
                                            </v-btn>
                                        </template>
                                        <v-list>
                                            <v-list-item
                                                v-for="([title, icon, action], index) in menuActions.actionsList"
                                                :key="index" :prepend-icon="icon" :title="title" :value="title"
                                                @click="onUserMenuClick(action, index)">
                                            </v-list-item>
                                        </v-list>
                                    </v-menu>
                                </template>

                            </v-data-table>
                        </v-col>
                    </v-row>
                    <v-row ma="10">
                        <v-col cols="12" sm="12" ma="10">
                            <v-btn color="primary" @click="onButtonRefresh(event)" block>Refresh</v-btn>
                        </v-col>
                    </v-row>
                </div>
                <v-footer class="d-flex align-center justify-center ga-2 flex-wrap flex-grow-1 py-3" :app="true"
                    color="surface-light">
                    <div class="flex-1-0-100 text-center mt-2">
                        {{ new Date().getFullYear() }} — <strong>Vuetify</strong>
                    </div>
                </v-footer>
            </v-main>

        </v-layout>
        <!-- </v-card> -->
    </template>

    <script setup>
        const { createApp, ref, defineProps, reactive } = Vue;
        const { createVuetify, useTheme, version } = Vuetify;


        const vuetify = createVuetify({
            /*
            theme: {
                defaultTheme: "dark",
            },
            */
        });
        const app = createApp({
            template: "#app-template",
            setup() {

                const appAuthor = "StarDust";
                const faceId = 10;
                const faceIdUrl = "https://randomuser.me/api/portraits/men/22.jpg";

                const usersList = {
                    firstNames: ["Pedros", "Ped", "Huanos", "Domingo", "Aloisos"],
                    lastNames: ["Awataros", "Gudrios", "Aliende", "Boliwaro"]
                };
                var mainDrawer = Vue.ref(true);
                var secondDrawer = Vue.ref(false);

                var faceRailIcon = Vue.ref("mdi-chevron-right");

                const searchData = Vue.reactive({
                    applicationID: "12345678",
                    referIDS: [],
                    referID: "",

                    selectedDateFrom1: "",
                    selectedDateInto1: "",
                    searchText1: "",
                    searchText2: "",
                    dateFromDateMenu: null,
                    dateIntoDateMenu: null,
                    selectedDateFromFull: null,
                    selectedDateFrom: null,
                    selectedDateFromInto: null,
                    selectedDateInto: null,
                    userMode: null,
                    userState: null
                });


                var stepsData = Vue.ref(
                    {
                        stepsHeaders: [
                            { title: 'ID', subtitle: "Ident", align: 'start', sortable: false, key: 'id', class: 'my-header-style' },
                            { title: 'Created', subtitle: "Date Created/Updated", align: 'start', sortable: false, key: 'dateCreated', class: 'my-header-style' },
                            { title: 'ApplicationId', subtitle: "Application ident", align: 'end', key: 'applicationId', class: 'my-header-style' },
                            { title: 'StateCode', subtitle: "Client StateCode", align: 'end', key: 'stateCode', class: 'my-header-style' },
                            { title: 'AbsProdCode', subtitle: "ABS prod code", align: 'end', key: 'absProdCode', class: 'my-header-style' },
                            { title: 'StepUUID', subtitle: "UUID", align: 'end', key: 'stepUUID', class: 'my-header-style' },
                            { title: 'StepCode', subtitle: "Step Code", align: 'end', key: 'stepCode', class: 'my-header-style' },
                            { title: 'Actions', subtitle: "Actions buttons", align: 'center', key: 'actions', sortable: false, width: '10%' },
                            { title: 'Operations', subtitle: "Operation for item", align: 'center', key: 'operations', sortable: false, width: '10%' },
                        ],
                        selectedRows: [],
                        selectedItems: [],
                        stepsItemsData: [],
                        stepsSimpleData: [
                            // ===================================
                            // applicationId: 1000001 (Records 1-20)
                            // ===================================
                            {
                                "id": 1,
                                "dateCreated": "2023-10-15 09:12:34.123",
                                "dateModified": "2023-10-15 09:12:34.123",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 1,
                                "absProdCode": "12.66.45.33.1",
                                "stepUUID": "a1b2c3d4-5e6f-40a8-8b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_a",
                                    "durationSec": 15
                                }
                            },
                            {
                                "id": 2,
                                "dateCreated": "2023-10-16 14:22:01.456",
                                "dateModified": "2023-10-16 14:22:01.456",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 1,
                                "absProdCode": "12.66.45.33.1",
                                "stepUUID": "a1b2c3d4-5e6f-40a8-8b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_b",
                                    "durationSec": 45
                                }
                            },
                            {
                                "id": 3,
                                "dateCreated": "2023-10-17 10:05:55.789",
                                "dateModified": "2023-10-17 10:05:55.789",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 1,
                                "absProdCode": "12.66.45.33.1",
                                "stepUUID": "a1b2c3d4-5e6f-40a8-8b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_APPROVE",
                                "payload": {
                                    "userName": "user_c",
                                    "durationSec": 90
                                }
                            },
                            {
                                "id": 4,
                                "dateCreated": "2023-10-18 11:30:10.011",
                                "dateModified": "2023-10-18 11:30:10.011",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 2,
                                "absProdCode": "12.66.45.33.2",
                                "stepUUID": "4c5d6e7f-8a9b-4c1d-9e2f-3a4b5c6d7e8f",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_d",
                                    "durationSec": 20
                                }
                            },
                            {
                                "id": 5,
                                "dateCreated": "2023-10-19 16:40:20.334",
                                "dateModified": "2023-10-19 16:40:20.334",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 2,
                                "absProdCode": "12.66.45.33.2",
                                "stepUUID": "4c5d6e7f-8a9b-4c1d-9e2f-3a4b5c6d7e8f",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_e",
                                    "durationSec": 55
                                }
                            },
                            {
                                "id": 6,
                                "dateCreated": "2023-10-20 08:50:30.667",
                                "dateModified": "2023-10-20 08:50:30.667",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 2,
                                "absProdCode": "12.66.45.33.2",
                                "stepUUID": "4c5d6e7f-8a9b-4c1d-9e2f-3a4b5c6d7e8f",
                                "stepCode": "STEP_REJECT",
                                "payload": {
                                    "userName": "user_f",
                                    "durationSec": 120
                                }
                            },
                            {
                                "id": 7,
                                "dateCreated": "2023-10-21 13:00:40.990",
                                "dateModified": "2023-10-21 13:00:40.990",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 3,
                                "absProdCode": "12.66.45.33.3",
                                "stepUUID": "e9f0a1b2-c3d4-4e5f-86a7-b8c9d0e1f2a3",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_g",
                                    "durationSec": 10
                                }
                            },
                            {
                                "id": 8,
                                "dateCreated": "2023-10-22 17:10:51.223",
                                "dateModified": "2023-10-22 17:10:51.223",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 3,
                                "absProdCode": "12.66.45.33.3",
                                "stepUUID": "e9f0a1b2-c3d4-4e5f-86a7-b8c9d0e1f2a3",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_h",
                                    "durationSec": 30
                                }
                            },
                            {
                                "id": 9,
                                "dateCreated": "2023-10-23 09:21:01.556",
                                "dateModified": "2023-10-23 09:21:01.556",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 3,
                                "absProdCode": "12.66.45.33.3",
                                "stepUUID": "e9f0a1b2-c3d4-4e5f-86a7-b8c9d0e1f2a3",
                                "stepCode": "STEP_FINALIZE",
                                "payload": {
                                    "userName": "user_i",
                                    "durationSec": 60
                                }
                            },
                            {
                                "id": 10,
                                "dateCreated": "2023-10-24 14:31:11.889",
                                "dateModified": "2023-10-24 14:31:11.889",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 4,
                                "absProdCode": "12.66.45.33.4",
                                "stepUUID": "a1b2c3d4-5e6f-40a8-8b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_j",
                                    "durationSec": 12
                                }
                            },
                            {
                                "id": 11,
                                "dateCreated": "2023-10-25 10:41:22.001",
                                "dateModified": "2023-10-25 10:41:22.001",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 4,
                                "absProdCode": "12.66.45.33.4",
                                "stepUUID": "e9f0a1b2-c3d4-4e5f-86a7-b8c9d0e1f2a3",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_k",
                                    "durationSec": 40
                                }
                            },
                            {
                                "id": 12,
                                "dateCreated": "2023-10-26 15:51:32.334",
                                "dateModified": "2023-10-26 15:51:32.334",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 4,
                                "absProdCode": "12.66.45.33.4",
                                "stepUUID": "4c5d6e7f-8a9b-4c1d-9e2f-3a4b5c6d7e8f",
                                "stepCode": "STEP_APPROVE",
                                "payload": {
                                    "userName": "user_l",
                                    "durationSec": 80
                                }
                            },
                            {
                                "id": 13,
                                "dateCreated": "2023-10-27 11:01:42.667",
                                "dateModified": "2023-10-27 11:01:42.667",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 1,
                                "absProdCode": "12.66.45.33.5",
                                "stepUUID": "a1b2c3d4-5e6f-40a8-8b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_m",
                                    "durationSec": 15
                                }
                            },
                            {
                                "id": 14,
                                "dateCreated": "2023-10-28 16:11:53.000",
                                "dateModified": "2023-10-28 16:11:53.000",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 1,
                                "absProdCode": "12.66.45.33.5",
                                "stepUUID": "4c5d6e7f-8a9b-4c1d-9e2f-3a4b5c6d7e8f",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_n",
                                    "durationSec": 45
                                }
                            },
                            {
                                "id": 15,
                                "dateCreated": "2023-10-29 10:22:03.333",
                                "dateModified": "2023-10-29 10:22:03.333",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 1,
                                "absProdCode": "12.66.45.33.5",
                                "stepUUID": "e9f0a1b2-c3d4-4e5f-86a7-b8c9d0e1f2a3",
                                "stepCode": "STEP_APPROVE",
                                "payload": {
                                    "userName": "user_o",
                                    "durationSec": 90
                                }
                            },
                            {
                                "id": 16,
                                "dateCreated": "2023-10-30 15:32:13.666",
                                "dateModified": "2023-10-30 15:32:13.666",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 2,
                                "absProdCode": "12.66.45.33.6",
                                "stepUUID": "a1b2c3d4-5e6f-40a8-8b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_p",
                                    "durationSec": 20
                                }
                            },
                            {
                                "id": 17,
                                "dateCreated": "2023-10-31 11:42:23.999",
                                "dateModified": "2023-10-31 11:42:23.999",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 2,
                                "absProdCode": "12.66.45.33.6",
                                "stepUUID": "4c5d6e7f-8a9b-4c1d-9e2f-3a4b5c6d7e8f",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_r",
                                    "durationSec": 55
                                }
                            },
                            {
                                "id": 18,
                                "dateCreated": "2023-11-01 16:52:34.332",
                                "dateModified": "2023-11-01 16:52:34.332",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 2,
                                "absProdCode": "12.66.45.33.6",
                                "stepUUID": "e9f0a1b2-c3d4-4e5f-86a7-b8c9d0e1f2a3",
                                "stepCode": "STEP_REJECT",
                                "payload": {
                                    "userName": "user_s",
                                    "durationSec": 120
                                }
                            },
                            {
                                "id": 19,
                                "dateCreated": "2023-11-02 12:02:44.665",
                                "dateModified": "2023-11-02 12:02:44.665",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 3,
                                "absProdCode": "12.66.45.33.7",
                                "stepUUID": "a1b2c3d4-5e6f-40a8-8b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_t",
                                    "durationSec": 10
                                }
                            },
                            {
                                "id": 20,
                                "dateCreated": "2023-11-03 17:12:54.998",
                                "dateModified": "2023-11-03 17:12:54.998",
                                "applicationId": 1000001,
                                "stateCode": "2547887785",
                                "programTypeId": 3,
                                "absProdCode": "12.66.45.33.7",
                                "stepUUID": "4c5d6e7f-8a9b-4c1d-9e2f-3a4b5c6d7e8f",
                                "stepCode": "STEP_FINALIZE",
                                "payload": {
                                    "userName": "user_u",
                                    "durationSec": 60
                                }
                            },
                            // ===================================
                            // applicationId: 1000002 (Records 21-40)
                            // ===================================
                            {
                                "id": 21,
                                "dateCreated": "2023-11-04 13:23:05.331",
                                "dateModified": "2023-11-04 13:23:05.331",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 1,
                                "absProdCode": "18.11.22.77.1",
                                "stepUUID": "b1c2d3e4-6f7a-41b9-9c0d-2e3f4a5b6c7d",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_v",
                                    "durationSec": 15
                                }
                            },
                            {
                                "id": 22,
                                "dateCreated": "2023-11-05 18:33:15.664",
                                "dateModified": "2023-11-05 18:33:15.664",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 1,
                                "absProdCode": "18.11.22.77.1",
                                "stepUUID": "b1c2d3e4-6f7a-41b9-9c0d-2e3f4a5b6c7d",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_w",
                                    "durationSec": 45
                                }
                            },
                            {
                                "id": 23,
                                "dateCreated": "2023-11-06 14:43:25.997",
                                "dateModified": "2023-11-06 14:43:25.997",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 1,
                                "absProdCode": "18.11.22.77.1",
                                "stepUUID": "b1c2d3e4-6f7a-41b9-9c0d-2e3f4a5b6c7d",
                                "stepCode": "STEP_APPROVE",
                                "payload": {
                                    "userName": "user_x",
                                    "durationSec": 90
                                }
                            },
                            {
                                "id": 24,
                                "dateCreated": "2023-11-07 19:53:36.330",
                                "dateModified": "2023-11-07 19:53:36.330",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 2,
                                "absProdCode": "18.11.22.77.2",
                                "stepUUID": "5d6e7f8a-9b0c-4d2e-8f1a-2b3c4d5e6f7a",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_y",
                                    "durationSec": 20
                                }
                            },
                            {
                                "id": 25,
                                "dateCreated": "2023-11-08 15:03:46.663",
                                "dateModified": "2023-11-08 15:03:46.663",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 2,
                                "absProdCode": "18.11.22.77.2",
                                "stepUUID": "5d6e7f8a-9b0c-4d2e-8f1a-2b3c4d5e6f7a",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_z",
                                    "durationSec": 55
                                }
                            },
                            {
                                "id": 26,
                                "dateCreated": "2023-11-09 20:13:56.996",
                                "dateModified": "2023-11-09 20:13:56.996",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 2,
                                "absProdCode": "18.11.22.77.2",
                                "stepUUID": "5d6e7f8a-9b0c-4d2e-8f1a-2b3c4d5e6f7a",
                                "stepCode": "STEP_REJECT",
                                "payload": {
                                    "userName": "user_aa",
                                    "durationSec": 120
                                }
                            },
                            {
                                "id": 27,
                                "dateCreated": "2023-11-10 16:24:07.329",
                                "dateModified": "2023-11-10 16:24:07.329",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 3,
                                "absProdCode": "18.11.22.77.3",
                                "stepUUID": "f0a1b2c3-d4e5-4f6a-97b8-c9d0e1f2a3b4",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_bb",
                                    "durationSec": 10
                                }
                            },
                            {
                                "id": 28,
                                "dateCreated": "2023-11-11 21:34:17.662",
                                "dateModified": "2023-11-11 21:34:17.662",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 3,
                                "absProdCode": "18.11.22.77.3",
                                "stepUUID": "f0a1b2c3-d4e5-4f6a-97b8-c9d0e1f2a3b4",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_cc",
                                    "durationSec": 30
                                }
                            },
                            {
                                "id": 29,
                                "dateCreated": "2023-11-12 17:44:27.995",
                                "dateModified": "2023-11-12 17:44:27.995",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 3,
                                "absProdCode": "18.11.22.77.3",
                                "stepUUID": "f0a1b2c3-d4e5-4f6a-97b8-c9d0e1f2a3b4",
                                "stepCode": "STEP_FINALIZE",
                                "payload": {
                                    "userName": "user_dd",
                                    "durationSec": 60
                                }
                            },
                            {
                                "id": 30,
                                "dateCreated": "2023-11-13 22:54:38.328",
                                "dateModified": "2023-11-13 22:54:38.328",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 4,
                                "absProdCode": "18.11.22.77.4",
                                "stepUUID": "b1c2d3e4-6f7a-41b9-9c0d-2e3f4a5b6c7d",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_ee",
                                    "durationSec": 12
                                }
                            },
                            {
                                "id": 31,
                                "dateCreated": "2023-11-14 19:04:48.661",
                                "dateModified": "2023-11-14 19:04:48.661",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 4,
                                "absProdCode": "18.11.22.77.4",
                                "stepUUID": "5d6e7f8a-9b0c-4d2e-8f1a-2b3c4d5e6f7a",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_ff",
                                    "durationSec": 40
                                }
                            },
                            {
                                "id": 32,
                                "dateCreated": "2023-11-15 15:14:58.994",
                                "dateModified": "2023-11-15 15:14:58.994",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 4,
                                "absProdCode": "18.11.22.77.4",
                                "stepUUID": "f0a1b2c3-d4e5-4f6a-97b8-c9d0e1f2a3b4",
                                "stepCode": "STEP_APPROVE",
                                "payload": {
                                    "userName": "user_gg",
                                    "durationSec": 80
                                }
                            },
                            {
                                "id": 33,
                                "dateCreated": "2023-11-16 20:25:09.327",
                                "dateModified": "2023-11-16 20:25:09.327",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 1,
                                "absProdCode": "18.11.22.77.5",
                                "stepUUID": "b1c2d3e4-6f7a-41b9-9c0d-2e3f4a5b6c7d",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_hh",
                                    "durationSec": 15
                                }
                            },
                            {
                                "id": 34,
                                "dateCreated": "2023-11-17 16:35:19.660",
                                "dateModified": "2023-11-17 16:35:19.660",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 1,
                                "absProdCode": "18.11.22.77.5",
                                "stepUUID": "5d6e7f8a-9b0c-4d2e-8f1a-2b3c4d5e6f7a",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_ii",
                                    "durationSec": 45
                                }
                            },
                            {
                                "id": 35,
                                "dateCreated": "2023-11-18 21:45:30.000",
                                "dateModified": "2023-11-18 21:45:30.000",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 1,
                                "absProdCode": "18.11.22.77.5",
                                "stepUUID": "f0a1b2c3-d4e5-4f6a-97b8-c9d0e1f2a3b4",
                                "stepCode": "STEP_APPROVE",
                                "payload": {
                                    "userName": "user_jj",
                                    "durationSec": 90
                                }
                            },
                            {
                                "id": 36,
                                "dateCreated": "2023-11-19 17:55:40.333",
                                "dateModified": "2023-11-19 17:55:40.333",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 2,
                                "absProdCode": "18.11.22.77.6",
                                "stepUUID": "b1c2d3e4-6f7a-41b9-9c0d-2e3f4a5b6c7d",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_kk",
                                    "durationSec": 20
                                }
                            },
                            {
                                "id": 37,
                                "dateCreated": "2023-11-20 23:05:50.666",
                                "dateModified": "2023-11-20 23:05:50.666",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 2,
                                "absProdCode": "18.11.22.77.6",
                                "stepUUID": "5d6e7f8a-9b0c-4d2e-8f1a-2b3c4d5e6f7a",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_ll",
                                    "durationSec": 55
                                }
                            },
                            {
                                "id": 38,
                                "dateCreated": "2023-11-21 19:16:00.999",
                                "dateModified": "2023-11-21 19:16:00.999",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 2,
                                "absProdCode": "18.11.22.77.6",
                                "stepUUID": "f0a1b2c3-d4e5-4f6a-97b8-c9d0e1f2a3b4",
                                "stepCode": "STEP_REJECT",
                                "payload": {
                                    "userName": "user_mm",
                                    "durationSec": 120
                                }
                            },
                            {
                                "id": 39,
                                "dateCreated": "2023-11-22 15:26:11.332",
                                "dateModified": "2023-11-22 15:26:11.332",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 3,
                                "absProdCode": "18.11.22.77.7",
                                "stepUUID": "b1c2d3e4-6f7a-41b9-9c0d-2e3f4a5b6c7d",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_nn",
                                    "durationSec": 10
                                }
                            },
                            {
                                "id": 40,
                                "dateCreated": "2023-11-23 20:36:21.665",
                                "dateModified": "2023-11-23 20:36:21.665",
                                "applicationId": 1000002,
                                "stateCode": "9123456780",
                                "programTypeId": 3,
                                "absProdCode": "18.11.22.77.7",
                                "stepUUID": "5d6e7f8a-9b0c-4d2e-8f1a-2b3c4d5e6f7a",
                                "stepCode": "STEP_FINALIZE",
                                "payload": {
                                    "userName": "user_oo",
                                    "durationSec": 60
                                }
                            },
                            // ... (ciąg dalszy rekordów 41-200)
                            // Wzór: Każde kolejne 20 rekordów dotyczy kolejnego applicationId (1000003 do 1000010).
                            // applicationId 1000003: id 41-60
                            // applicationId 1000004: id 61-80
                            // applicationId 1000005: id 81-100
                            // applicationId 1000006: id 101-120
                            // applicationId 1000007: id 121-140
                            // applicationId 1000008: id 141-160
                            // applicationId 1000009: id 161-180
                            // applicationId 1000010: id 181-200
                            // Nowe UUID dla każdego applicationId, zmieniające się co 2-3 kroki w ramach tego samego applicationId:

                            // Przykładowe rekordy z dalszej części:

                            // ===================================
                            // applicationId: 1000003 (Records 41-60)
                            // ===================================
                            {
                                "id": 41,
                                "dateCreated": "2023-11-24 16:46:32.000",
                                "dateModified": "2023-11-24 16:46:32.000",
                                "applicationId": 1000003,
                                "stateCode": "8032194567",
                                "programTypeId": 2,
                                "absProdCode": "33.44.55.66.1",
                                "stepUUID": "c2d3e4f5-7a8b-42c1-a0d2-e3f4a5b6c7d8",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_pp",
                                    "durationSec": 18
                                }
                            },
                            {
                                "id": 42,
                                "dateCreated": "2023-11-25 21:56:42.333",
                                "dateModified": "2023-11-25 21:56:42.333",
                                "applicationId": 1000003,
                                "stateCode": "8032194567",
                                "programTypeId": 2,
                                "absProdCode": "33.44.55.66.1",
                                "stepUUID": "c2d3e4f5-7a8b-42c1-a0d2-e3f4a5b6c7d8",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_qq",
                                    "durationSec": 50
                                }
                            },
                            {
                                "id": 43,
                                "dateCreated": "2023-11-26 18:06:52.666",
                                "dateModified": "2023-11-26 18:06:52.666",
                                "applicationId": 1000003,
                                "stateCode": "8032194567",
                                "programTypeId": 2,
                                "absProdCode": "33.44.55.66.1",
                                "stepUUID": "c2d3e4f5-7a8b-42c1-a0d2-e3f4a5b6c7d8",
                                "stepCode": "STEP_APPROVE",
                                "payload": {
                                    "userName": "user_rr",
                                    "durationSec": 100
                                }
                            },
                            // ... (rekordy do id 60)

                            // ===================================
                            // applicationId: 1000006 (Records 101-120)
                            // ===================================
                            {
                                "id": 101,
                                "dateCreated": "2024-01-02 10:10:10.000",
                                "dateModified": "2024-01-02 10:10:10.000",
                                "applicationId": 1000006,
                                "stateCode": "3216549870",
                                "programTypeId": 4,
                                "absProdCode": "77.88.99.00.1",
                                "stepUUID": "f6a7b8c9-d0e1-4f2a-93b4-c5d6e7f8a9b0",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_zzz",
                                    "durationSec": 14
                                }
                            },
                            {
                                "id": 102,
                                "dateCreated": "2024-01-03 15:20:20.333",
                                "dateModified": "2024-01-03 15:20:20.333",
                                "applicationId": 1000006,
                                "stateCode": "3216549870",
                                "programTypeId": 4,
                                "absProdCode": "77.88.99.00.1",
                                "stepUUID": "f6a7b8c9-d0e1-4f2a-93b4-c5d6e7f8a9b0",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_aaaa",
                                    "durationSec": 60
                                }
                            },
                            // ... (rekordy do id 120)

                            // ===================================
                            // applicationId: 1000010 (Records 181-200)
                            // ===================================
                            {
                                "id": 181,
                                "dateCreated": "2024-02-20 08:00:00.000",
                                "dateModified": "2024-02-20 08:00:00.000",
                                "applicationId": 1000010,
                                "stateCode": "1098765432",
                                "programTypeId": 3,
                                "absProdCode": "90.09.80.08.1",
                                "stepUUID": "1a2b3c4d-5e6f-47a8-9b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_qqq",
                                    "durationSec": 11
                                }
                            },
                            {
                                "id": 182,
                                "dateCreated": "2024-02-21 13:10:10.111",
                                "dateModified": "2024-02-21 13:10:10.111",
                                "applicationId": 1000010,
                                "stateCode": "1098765432",
                                "programTypeId": 3,
                                "absProdCode": "90.09.80.08.1",
                                "stepUUID": "1a2b3c4d-5e6f-47a8-9b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_VERIFY",
                                "payload": {
                                    "userName": "user_rrr",
                                    "durationSec": 35
                                }
                            },
                            {
                                "id": 183,
                                "dateCreated": "2024-02-22 18:20:20.222",
                                "dateModified": "2024-02-22 18:20:20.222",
                                "applicationId": 1000010,
                                "stateCode": "1098765432",
                                "programTypeId": 3,
                                "absProdCode": "90.09.80.08.1",
                                "stepUUID": "1a2b3c4d-5e6f-47a8-9b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_APPROVE",
                                "payload": {
                                    "userName": "user_sss",
                                    "durationSec": 75
                                }
                            },
                            {
                                "id": 184,
                                "dateCreated": "2024-02-23 23:30:30.333",
                                "dateModified": "2024-02-23 23:30:30.333",
                                "applicationId": 1000010,
                                "stateCode": "1098765432",
                                "programTypeId": 4,
                                "absProdCode": "90.09.80.08.2",
                                "stepUUID": "5f6e7d8c-9b0a-41d2-a3f4-b5c6d7e8f9a0",
                                "stepCode": "STEP_START",
                                "payload": {
                                    "userName": "user_ttt",
                                    "durationSec": 19
                                }
                            },
                            // ... (aż do rekordu 200)
                            {
                                "id": 200,
                                "dateCreated": "2024-03-03 15:59:59.999",
                                "dateModified": "2024-03-03 15:59:59.999",
                                "applicationId": 1000010,
                                "stateCode": "1098765432",
                                "programTypeId": 1,
                                "absProdCode": "90.09.80.08.7",
                                "stepUUID": "1a2b3c4d-5e6f-47a8-9b0c-d1e2f3g4h5i6",
                                "stepCode": "STEP_FINALIZE",
                                "payload": {
                                    "userName": "user_wwww",
                                    "durationSec": 58
                                }
                            }
                        ]

                    }
                );

                const menuActions = {
                    userMenu: [
                        ["Hide", "mdi-fire", "hide"],
                        ["Logout", "mdi-logout", "logout"]
                    ],
                    actionsList: [
                        ["Print Report", "mdi-printer", "print_rep"],
                        ["Print Barcode", "mdi-barcode", "print_bar"],
                        ["Print QRCode", "mdi-qrcode", "print_qr"]
                    ]
                };

                const dicts = {
                    debtStatus: [

                    ]
                };

                const theme = ref('light');
                const isDarkTheme = ref(false);
                const isLoading = ref(false);

                const isShowUserMenu = ref(false);

                const appVersion = "v. 0.0.37 (2025-10-23 11:26:01)";

                return {
                    theme
                    , isDarkTheme
                    , isShowUserMenu
                    , isLoading
                    , appVersion, appAuthor
                    , faceId
                    , faceRailIcon
                    , faceIdUrl

                    , secondDrawer

                    , usersList

                    , stepsData
                    , dicts
                    , searchData
                    , menuActions

                }
            },
            created() {
                console.log(version);
            },
            mounted() {
                var stepsHeaders = localStorage.getItem('stepsHeaders');
                if (stepsHeaders) {
                    this.stepsData.stepsHeaders = JSON.parse(stepsHeaders);
                }
                this.focusInput();
            },
            watch: {
                "searchData.referID": function (newQuestion, oldQuestion) {
                    this.searchData.searchText = this.searchData.referID;
                }
            },
            methods: {
                focusInput() {                    
                    this.$refs.applicationID.focus();
                },

                formatDate(date) {
                    if (!date) {
                        return null
                    }
                    console.log(date);
                    const [year, month, day] = date.toISOString().replace('T', '-').split('-');
                    console.log(date.toISOString());
                    var ret = `${day}-${month}-${year}`;
                    console.log(ret);
                    return ret;
                },

                onBtnChangeTheme() {
                    this.theme = this.theme === 'light' ? 'dark' : 'light';
                    this.isDarkTheme = !this.isDarkTheme;
                    //console.log(this.$vuetify.theme);
                    //console.log(this.$vuetify.theme.global);
                    //this.$vuetify.theme.dark = !this.$vuetify.theme.dark;
                    //this.$vuetify.theme.dark = !this.$vuetify.theme.dark ? 'light' : 'dark';
                    var isDark = this.$vuetify.theme.global.current.dark;
                    console.log(`isDark=${isDark}, isDarkTheme= ${this.isDarkTheme}`);
                    console.log('dark', this.$vuetify.theme.global.current.dark, 'name', this.$vuetify.theme.global.name);
                    isDark = !isDark;
                    console.log('isDark', isDark);
                    //this.$vuetify.theme.global.current.dark = isDark;
                    this.$vuetify.theme.global.name = isDark ? 'dark' : 'light';
                    console.log('dark', this.$vuetify.theme.global.current.dark, 'name', this.$vuetify.theme.global.name);
                },

                async onBtnSearch() {
                    if (!this.searchData.applicationID) {
                        return;
                    }
                    this.isLoading = true;
                    try {
                        await new Promise(resolve => setTimeout(resolve, 1500));
                    } catch (error) {
                        this.isLoading = false;
                    } finally {
                        this.isLoading = false;

                        this.stepsData.stepsItemsData = this.stepsData.stepsSimpleData;

                        this.searchData.referIDS = getUniqueStepUUIDs(this.stepsData.stepsItemsData);


                        /*
                        for (var i = 0; i < this.getRandomArbitrary(10, 20); i++)
                            this.searchData.referIDS.push(
                                this.generateUUID()
                            );
                        */
                        /*
                        this.searchData.referIDS = [
                            "31f197eb-3cac-4b83-b625-13855a859268",
                            "3aa83506-b4df-46f8-8ae8-e93d99446bac",
                            "2f8914eb-e37f-45fb-9629-79034832eabc",
                            "0ef32301-034f-4b78-aeca-8cc45dbd3d1e",
                            "17c68bbd-8bf7-4967-9c2b-048a58483b49",
                            "b6cbffca-848e-4bd3-b973-57aebe0f1c4b",
                            "6bcb6599-1b72-444e-9a28-4078b52c6038",
                            "735289fb-b363-4b2d-a095-6fc1aa6e4402",
                            "7cd92e64-0c29-46e8-9577-169aacf0f2d2",
                            "bcec1584-5c83-4a9d-af84-4c0e47b58b41",
                        ]
                        */
                    }
                },

                onBtnClear() {
                    this.searchData.applicationID = "";
                    this.searchData.referID = "";
                    this.searchData.referIDS = [];
                    this.stepsItemsData = [];
                },

                filterNumber(evt) {
                    evt = (evt) ? evt : window.event;
                    let expect = evt.target.value.toString() + evt.key.toString();
                    if (!/^[-+]?[0-9]*\.?[0-9]*$/.test(expect)) {
                        evt.preventDefault();
                    } else {
                        return true;
                    }
                },

                checkReorderColumnsDisabled(index) {
                    ret = false;
                    var isSortableCurr = this.stepsData.stepsHeaders[index].sortable;
                    if (isSortableCurr == undefined) { isSortableCurr = true; }
                    ret = !isSortableCurr;
                    return ret;
                },

                onReorderColumnsClick(where, index) {
                    var isSortableCurr = this.stepsData.stepsHeaders[index].sortable;
                    if (isSortableCurr == undefined) { isSortableCurr = true; }
                    //console.log(where, index, this.stepsData.stepsHeaders[index].title, isSortableCurr, this.stepsData.stepsHeaders[index].sortable);
                    if (where == 'UP' && index > 0 && isSortableCurr) {
                        var isSortablePrev = this.stepsData.stepsHeaders[index - 1].sortable;
                        if (isSortablePrev == undefined) { isSortablePrev = true; }
                        if (isSortablePrev) {
                            var element_old = this.stepsData.stepsHeaders[index - 1];
                            var element_new = this.stepsData.stepsHeaders[index];
                            this.stepsData.stepsHeaders[index] = element_old;
                            this.stepsData.stepsHeaders[index - 1] = element_new;
                        }
                    }
                    if (where == 'DN' && index < this.stepsData.stepsHeaders.length && isSortableCurr) {
                        var isSortableNext = this.stepsData.stepsHeaders[index + 1].sortable;
                        if (isSortableNext == undefined) { isSortableNext = true; }
                        if (isSortableNext) {
                            var element_old = this.stepsData.stepsHeaders[index + 1];
                            var element_new = this.stepsData.stepsHeaders[index];
                            this.stepsData.stepsHeaders[index] = element_old;
                            this.stepsData.stepsHeaders[index + 1] = element_new;
                        }
                    }
                    localStorage.setItem('stepsHeaders', JSON.stringify(this.stepsData.stepsHeaders));
                },

                onOperationClick(event, index) {

                },

                onButtonRefresh(event) {

                },

                onBtnApplyFilters() {
                    this.saveFilters();
                },
                onBtnClearFilters() {
                    for (var i in this.searchData) {
                        this.searchData[i] = null;
                    }
                    this.saveFilters();
                },

                saveFilters() {
                    console.log(this.searchData);
                    localStorage.setItem('searchData', JSON.stringify(this.searchData));
                },
                loadFilters() {
                    var searchData = localStorage.getItem('searchData');
                    var searchDataObj = JSON.parse(searchData);
                    console.log(`[loadFilters] ${searchData}`);
                    console.log(searchDataObj);
                    if (searchData) {
                        var parDate = [];
                        this.searchData.searchText = searchDataObj.searchText;

                        this.searchData.selectedDateFrom = searchDataObj.selectedDateFrom;
                        this.searchData.dateFromDateMenu = searchDataObj.dateFromDateMenu;
                        this.searchData.selectedDateFromFull = this.parseDate(searchDataObj.selectedDateFrom);
                        //parDate = searchDataObj.selectedDateFrom.split('-');
                        //this.searchData.selectedDateFromFull = new Date(`${parDate[2]}-${parDate[1]}-${parDate[0]}`);

                        this.searchData.selectedDateInto = searchDataObj.selectedDateInto;
                        this.searchData.dateIntoDateMenu = searchDataObj.dateIntoDateMenu;
                        this.searchData.selectedDateIntoFull = this.parseDate(searchDataObj.selectedDateInto);
                        //parDate = searchDataObj.selectedDateInto.split('-');
                        //this.searchData.selectedDateIntoFull = new Date(`${parDate[2]}-${parDate[1]}-${parDate[0]}`);
                    }
                },

                onUserMenuClick(event, index) {
                    switch (event) {
                        case "logout":
                            console.log(`Execute event ${event}`);
                            break;
                        case "hide":
                            console.log(`Execute event ${event}`);
                            this.mainDrawer = false;
                            break;
                        default:
                            console.log(`Sorry, we are out of ${event}.`);
                    }
                },

                stepsDataHandleClick(event, row) {
                    //https://codepen.io/Hexodus/pen/ExKGWBe
                    let selectState = (row.isSelected()) ? false : true;
                    //console.log(`[stepsDataHandleClick] event ${JSON.stringify(event)}`);
                    //console.log(`[stepsDataHandleClick] row  ${JSON.stringify(row)}`);
                    //console.log(row);
                    console.log('[stepsDataHandleClick]', this.stepsData.selectedItems.length);
                    console.log('[stepsDataHandleClick]', this.stepsData.selectedItems);
                    this.toggleSelection(row.item.id);
                },

                toggleSelection(keyID) {
                    if (this.stepsData.selectedItems.includes(keyID)) {
                        this.stepsData.selectedItems = this.stepsData.selectedItems.filter(
                            selectedKeyID => selectedKeyID !== keyID
                        );
                    } else {
                        this.stepsData.selectedItems.push(keyID);
                    }
                },

                getDebtStatusIcon(debtstatus) {
                    ret = "mdi-account";
                    let item = this.dicts.debtStatus.find(x => x.status === ("" + debtstatus));
                    if (item !== undefined) ret = item.icon;
                    //console.log("[getDebtStatusIcon]", ret);
                    return ret;
                },

                getTitle(column) {
                    var ret = "";
                    console.log("[getTitle]", column);
                    return ret;
                },

                getDebtStatusIconColor(item) {
                    console.log("[getDebtStatusIconColor]", item);
                    ret = "green";
                    if (item.stepCode == "STEP_START") {
                        ret = "yellow";
                    }
                    if (item.stepCode == "STEP_VERIFY") {
                        ret = "pink";
                    }
                    if (item.stepCode == "STEP_REJECT") {
                        ret = "red";
                    }
                    console.log("[getDebtStatusIconColor]", ret);
                    return ret;
                },

                generateUUID() { // Public Domain/MIT
                    var d = new Date().getTime();
                    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {
                        d += performance.now(); //use high-precision timer if available
                    }
                    var newGuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                        var r = (d + Math.random() * 16) % 16 | 0;
                        d = Math.floor(d / 16);
                        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);
                    });

                    return newGuid;
                },
                getRandomArbitrary(min, max) {
                    return Math.random() * (max - min) + min;
                }

            }
        })
            .use(vuetify)
            .mount("#app");
    </script>
    <script>
        function getUniqueStepUUIDs(records) {
            // 1. Użyj .map() do wyodrębnienia wszystkich wartości stepUUID
            const allUUIDs = records.map(record => record.stepUUID);
            // 2. Użyj new Set() do automatycznego usunięcia duplikatów
            const uniqueUUIDsSet = new Set(allUUIDs);
            // 3. Konwertuj Set z powrotem na Array i zwróć
            return [...uniqueUUIDsSet];
        }
    </script>

</body>